2021-01-10 00:59:20.842 +03:30 [INF] User profile is available. Using 'C:\Users\Babak\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-10 00:59:24.739 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 00:59:26.472 +03:30 [INF] Now listening on: https://localhost:5001
2021-01-10 00:59:26.489 +03:30 [INF] Now listening on: http://localhost:5000
2021-01-10 00:59:26.530 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2021-01-10 00:59:26.539 +03:30 [INF] Hosting environment: Development
2021-01-10 00:59:26.546 +03:30 [INF] Content root path: F:\Asp Core 3 Standard Framwork DDD Aproach\Web\Web
2021-01-10 00:59:26.689 +03:30 [INF] Application is shutting down...
2021-01-10 00:59:28.015 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/ - -
2021-01-10 00:59:29.428 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/ - - - 404 0 - 1419.4905ms
2021-01-10 00:59:31.705 +03:30 [INF] Waiting for the host to be disposed. Ensure all 'IHost' instances are wrapped in 'using' blocks.
2021-01-10 00:59:32.198 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger - -
2021-01-10 00:59:32.212 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger - - - 301 0 - 13.7277ms
2021-01-10 00:59:32.230 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2021-01-10 00:59:32.534 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 305.2066ms
2021-01-10 00:59:32.627 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css - -
2021-01-10 00:59:32.628 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js - -
2021-01-10 00:59:32.630 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - -
2021-01-10 00:59:32.996 +03:30 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2021-01-10 00:59:32.997 +03:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2021-01-10 00:59:33.018 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - - - 200 311804 application/javascript 387.9278ms
2021-01-10 00:59:33.021 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css - - - 200 142933 text/css 394.1647ms
2021-01-10 00:59:33.117 +03:30 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2021-01-10 00:59:33.131 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js - - - 200 986342 application/javascript 502.8735ms
2021-01-10 00:59:33.509 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-01-10 00:59:33.532 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png - -
2021-01-10 00:59:33.537 +03:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2021-01-10 00:59:33.549 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png - - - 200 628 image/png 17.0420ms
2021-01-10 00:59:34.170 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 660.6443ms
2021-01-10 00:59:49.505 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 42
2021-01-10 00:59:49.547 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 00:59:49.556 +03:30 [INF] Executing endpoint 'Web.Controllers.AccountController.ValidateUser (Web)'
2021-01-10 00:59:49.740 +03:30 [INF] Route matched with {action = "ValidateUser", controller = "Account", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUser(Web.Model.AccountModels.ValidateUserViewModel) on controller Web.Controllers.AccountController (Web).
2021-01-10 00:59:51.746 +03:30 [INF] Executing action method Web.Controllers.AccountController.ValidateUser (Web) - Validation state: "Valid"
2021-01-10 00:59:51.968 +03:30 [WRN] Generating Token
2021-01-10 00:59:52.126 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 00:59:55.643 +03:30 [INF] Executed DbCommand (469ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-01-10 00:59:57.272 +03:30 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2021-01-10 00:59:57.374 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ClaimType], [u].[ClaimValue], [u].[UserId]
FROM [UserClaims] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2021-01-10 00:59:57.427 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2021-01-10 00:59:57.557 +03:30 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedDate], [r].[DisplayName], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2021-01-10 00:59:57.923 +03:30 [INF] Executed DbCommand (56ms) [Parameters=[@__role_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ClaimType], [r].[ClaimValue]
FROM [RoleClaims] AS [r]
WHERE [r].[RoleId] = @__role_Id_0
2021-01-10 00:59:59.917 +03:30 [INF] Executed DbCommand (93ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[IsValid], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE ([u].[UserId] = @__userId_0) AND (([u].[IsValid] <> CAST(1 AS bit)) OR ([u].[CreatedAt] <= @__date_1))
2021-01-10 01:00:00.325 +03:30 [INF] Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([Id], [CreatedAt], [IsValid], [UserId])
VALUES (@p0, @p1, @p2, @p3);
2021-01-10 01:00:00.355 +03:30 [INF] Executed DbCommand (101ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [UserRefreshTokens]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;

DELETE FROM [UserRefreshTokens]
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;

DELETE FROM [UserRefreshTokens]
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;

DELETE FROM [UserRefreshTokens]
WHERE [Id] = @p3;
SELECT @@ROWCOUNT;

DELETE FROM [UserRefreshTokens]
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;

DELETE FROM [UserRefreshTokens]
WHERE [Id] = @p5;
SELECT @@ROWCOUNT;

DELETE FROM [UserRefreshTokens]
WHERE [Id] = @p6;
SELECT @@ROWCOUNT;

DELETE FROM [UserRefreshTokens]
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2021-01-10 01:00:00.733 +03:30 [WRN] Token Generated
2021-01-10 01:00:00.927 +03:30 [INF] User with 2 ID old tokens has been removed
2021-01-10 01:00:11.616 +03:30 [INF] Executed action method Web.Controllers.AccountController.ValidateUser (Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19759.4287ms.
2021-01-10 01:00:11.652 +03:30 [INF] Executing JsonResult, writing value of type 'WebFrameWork.Api.ApiResult`1[[System.Object, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-01-10 01:00:11.712 +03:30 [INF] Executed action Web.Controllers.AccountController.ValidateUser (Web) in 21900.2415ms
2021-01-10 01:00:11.723 +03:30 [INF] Executed endpoint 'Web.Controllers.AccountController.ValidateUser (Web)'
2021-01-10 01:00:11.754 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 42 - 200 - application/json;+charset=utf-8 22248.9126ms
2021-01-10 01:00:31.931 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/v1/account/user/AuthenticatorKey - -
2021-01-10 01:00:32.340 +03:30 [INF] Successfully validated the token.
2021-01-10 01:00:32.358 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:00:32.396 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__p_0
2021-01-10 01:00:32.433 +03:30 [INF] Authorization was successful.
2021-01-10 01:00:32.441 +03:30 [INF] Executing endpoint 'Web.Controllers.AccountController.GetAuthenticatorKey (Web)'
2021-01-10 01:00:32.461 +03:30 [INF] Route matched with {action = "GetAuthenticatorKey", controller = "Account", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthenticatorKey() on controller Web.Controllers.AccountController (Web).
2021-01-10 01:00:32.613 +03:30 [INF] Executing action method Web.Controllers.AccountController.GetAuthenticatorKey (Web) - Validation state: "Valid"
2021-01-10 01:00:32.721 +03:30 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[LoginProvider], [u].[Name], [u].[GeneratedTime], [u].[Value]
FROM [UserTokens] AS [u]
WHERE (([u].[UserId] = @__p_0) AND ([u].[LoginProvider] = @__p_1)) AND ([u].[Name] = @__p_2)
2021-01-10 01:00:32.928 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[LoginProvider], [u].[Name], [u].[GeneratedTime], [u].[Value]
FROM [UserTokens] AS [u]
WHERE (([u].[UserId] = @__p_0) AND ([u].[LoginProvider] = @__p_1)) AND ([u].[Name] = @__p_2)
2021-01-10 01:00:33.185 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-01-10 01:00:33.328 +03:30 [INF] Executed DbCommand (56ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserTokens] ([LoginProvider], [Name], [UserId], [GeneratedTime], [Value])
VALUES (@p0, @p1, @p2, @p3, @p4);
2021-01-10 01:00:33.451 +03:30 [INF] Executed DbCommand (27ms) [Parameters=[@p15='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p16='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [GeneratedCode] = @p4, [LockoutEnabled] = @p5, [LockoutEnd] = @p6, [NormalizedEmail] = @p7, [NormalizedUserName] = @p8, [PasswordHash] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [SecurityStamp] = @p12, [TwoFactorEnabled] = @p13, [UserName] = @p14
WHERE [UserId] = @p15 AND [ConcurrencyStamp] = @p16;
SELECT @@ROWCOUNT;
2021-01-10 01:00:33.747 +03:30 [INF] Executed action method Web.Controllers.AccountController.GetAuthenticatorKey (Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1110.5629ms.
2021-01-10 01:00:33.765 +03:30 [INF] Executing JsonResult, writing value of type 'WebFrameWork.Api.ApiResult`1[[System.Object, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-01-10 01:00:33.781 +03:30 [INF] Executed action Web.Controllers.AccountController.GetAuthenticatorKey (Web) in 1300.1762ms
2021-01-10 01:00:33.795 +03:30 [INF] Executed endpoint 'Web.Controllers.AccountController.GetAuthenticatorKey (Web)'
2021-01-10 01:00:33.810 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/v1/account/user/AuthenticatorKey - - - 200 - application/json;+charset=utf-8 1880.0347ms
2021-01-10 01:02:48.759 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/RegisterAuthenticatorKey application/json 17
2021-01-10 01:02:48.829 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 01:02:48.842 +03:30 [INF] Successfully validated the token.
2021-01-10 01:02:48.868 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:02:48.927 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__p_0
2021-01-10 01:02:49.017 +03:30 [INF] Bearer was not authenticated. Failure message: Token secuirty stamp is not valid.
2021-01-10 01:02:49.034 +03:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-01-10 01:02:49.093 +03:30 [INF] AuthenticationScheme: Bearer was challenged.
2021-01-10 01:02:49.106 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/RegisterAuthenticatorKey application/json 17 - 401 - application/json;+charset=utf-8 347.0060ms
2021-01-10 01:02:56.811 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/RegisterAuthenticatorKey application/json 17
2021-01-10 01:02:56.833 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 01:02:56.844 +03:30 [INF] Successfully validated the token.
2021-01-10 01:02:56.857 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:02:56.946 +03:30 [INF] Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__p_0
2021-01-10 01:02:57.009 +03:30 [INF] Bearer was not authenticated. Failure message: Token secuirty stamp is not valid.
2021-01-10 01:02:57.019 +03:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-01-10 01:02:57.032 +03:30 [INF] AuthenticationScheme: Bearer was challenged.
2021-01-10 01:02:57.046 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/RegisterAuthenticatorKey application/json 17 - 401 - application/json;+charset=utf-8 235.1965ms
2021-01-10 01:03:13.925 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 42
2021-01-10 01:03:13.933 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 01:03:13.941 +03:30 [INF] Executing endpoint 'Web.Controllers.AccountController.ValidateUser (Web)'
2021-01-10 01:03:13.958 +03:30 [INF] Route matched with {action = "ValidateUser", controller = "Account", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUser(Web.Model.AccountModels.ValidateUserViewModel) on controller Web.Controllers.AccountController (Web).
2021-01-10 01:03:14.052 +03:30 [INF] Executing action method Web.Controllers.AccountController.ValidateUser (Web) - Validation state: "Valid"
2021-01-10 01:03:14.064 +03:30 [WRN] Generating Token
2021-01-10 01:03:14.074 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:03:14.108 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-01-10 01:03:14.278 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2021-01-10 01:03:14.374 +03:30 [INF] Executed DbCommand (9ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ClaimType], [u].[ClaimValue], [u].[UserId]
FROM [UserClaims] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2021-01-10 01:03:14.405 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2021-01-10 01:03:14.486 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedDate], [r].[DisplayName], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2021-01-10 01:03:14.511 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ClaimType], [r].[ClaimValue]
FROM [RoleClaims] AS [r]
WHERE [r].[RoleId] = @__role_Id_0
2021-01-10 01:03:14.537 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[IsValid], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE ([u].[UserId] = @__userId_0) AND (([u].[IsValid] <> CAST(1 AS bit)) OR ([u].[CreatedAt] <= @__date_1))
2021-01-10 01:03:14.541 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([Id], [CreatedAt], [IsValid], [UserId])
VALUES (@p0, @p1, @p2, @p3);
2021-01-10 01:03:14.570 +03:30 [INF] User with 2 ID old tokens has been removed
2021-01-10 01:03:14.653 +03:30 [WRN] Token Generated
2021-01-10 01:03:14.669 +03:30 [INF] Executed action method Web.Controllers.AccountController.ValidateUser (Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 606.023ms.
2021-01-10 01:03:14.721 +03:30 [INF] Executing JsonResult, writing value of type 'WebFrameWork.Api.ApiResult`1[[System.Object, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-01-10 01:03:14.772 +03:30 [INF] Executed action Web.Controllers.AccountController.ValidateUser (Web) in 792.689ms
2021-01-10 01:03:14.824 +03:30 [INF] Executed endpoint 'Web.Controllers.AccountController.ValidateUser (Web)'
2021-01-10 01:03:14.856 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 42 - 200 - application/json;+charset=utf-8 933.5697ms
2021-01-10 01:03:31.754 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/RegisterAuthenticatorKey application/json 17
2021-01-10 01:03:31.769 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 01:03:31.782 +03:30 [INF] Successfully validated the token.
2021-01-10 01:03:31.793 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:03:31.837 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__p_0
2021-01-10 01:03:31.867 +03:30 [INF] Authorization was successful.
2021-01-10 01:03:31.878 +03:30 [INF] Executing endpoint 'Web.Controllers.AccountController.RegisterAuthKey (Web)'
2021-01-10 01:03:31.898 +03:30 [INF] Route matched with {action = "RegisterAuthKey", controller = "Account", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAuthKey(Web.Model.AccountModels.RegisterAuthKeyViewModel) on controller Web.Controllers.AccountController (Web).
2021-01-10 01:03:32.165 +03:30 [INF] Executing action method Web.Controllers.AccountController.RegisterAuthKey (Web) - Validation state: "Valid"
2021-01-10 01:03:32.257 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[LoginProvider], [u].[Name], [u].[GeneratedTime], [u].[Value]
FROM [UserTokens] AS [u]
WHERE (([u].[UserId] = @__p_0) AND ([u].[LoginProvider] = @__p_1)) AND ([u].[Name] = @__p_2)
2021-01-10 01:03:32.319 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-01-10 01:03:32.367 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p15='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p16='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [GeneratedCode] = @p4, [LockoutEnabled] = @p5, [LockoutEnd] = @p6, [NormalizedEmail] = @p7, [NormalizedUserName] = @p8, [PasswordHash] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [SecurityStamp] = @p12, [TwoFactorEnabled] = @p13, [UserName] = @p14
WHERE [UserId] = @p15 AND [ConcurrencyStamp] = @p16;
SELECT @@ROWCOUNT;
2021-01-10 01:03:32.453 +03:30 [INF] Executed action method Web.Controllers.AccountController.RegisterAuthKey (Web), returned result Microsoft.AspNetCore.Mvc.OkResult in 246.2354ms.
2021-01-10 01:03:32.569 +03:30 [INF] Executing JsonResult, writing value of type 'WebFrameWork.Api.ApiResult'.
2021-01-10 01:03:32.662 +03:30 [INF] Executed action Web.Controllers.AccountController.RegisterAuthKey (Web) in 739.5442ms
2021-01-10 01:03:32.751 +03:30 [INF] Executed endpoint 'Web.Controllers.AccountController.RegisterAuthKey (Web)'
2021-01-10 01:03:32.760 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/RegisterAuthenticatorKey application/json 17 - 200 - application/json;+charset=utf-8 1005.4909ms
2021-01-10 01:18:08.995 +03:30 [INF] User profile is available. Using 'C:\Users\Babak\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-10 01:18:12.702 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:18:13.848 +03:30 [INF] Now listening on: https://localhost:5001
2021-01-10 01:18:13.865 +03:30 [INF] Now listening on: http://localhost:5000
2021-01-10 01:18:13.886 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2021-01-10 01:18:13.896 +03:30 [INF] Hosting environment: Development
2021-01-10 01:18:13.903 +03:30 [INF] Content root path: F:\Asp Core 3 Standard Framwork DDD Aproach\Web\Web
2021-01-10 01:18:14.108 +03:30 [INF] Application is shutting down...
2021-01-10 01:18:15.435 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/ - -
2021-01-10 01:18:15.955 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/ - - - 404 0 - 523.6335ms
2021-01-10 01:18:19.320 +03:30 [INF] Waiting for the host to be disposed. Ensure all 'IHost' instances are wrapped in 'using' blocks.
2021-01-10 01:18:20.061 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2021-01-10 01:18:20.472 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 411.1820ms
2021-01-10 01:18:21.003 +03:30 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-01-10 01:18:21.457 +03:30 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 454.9088ms
2021-01-10 01:18:33.075 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/TokenRequest application/json 42
2021-01-10 01:18:33.123 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 01:18:33.133 +03:30 [INF] Executing endpoint 'Web.Controllers.AccountController.ValidateUser (Web)'
2021-01-10 01:18:33.324 +03:30 [INF] Route matched with {action = "ValidateUser", controller = "Account", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUser(Web.Model.AccountModels.ValidateUserViewModel) on controller Web.Controllers.AccountController (Web).
2021-01-10 01:18:34.824 +03:30 [INF] Executing action method Web.Controllers.AccountController.ValidateUser (Web) - Validation state: "Valid"
2021-01-10 01:18:35.222 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:18:38.075 +03:30 [INF] Executed DbCommand (216ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-01-10 01:18:38.742 +03:30 [INF] Executed action method Web.Controllers.AccountController.ValidateUser (Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3870.6228ms.
2021-01-10 01:18:38.789 +03:30 [INF] Executing JsonResult, writing value of type 'WebFrameWork.Api.ApiResult`1[[System.Object, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-01-10 01:18:39.013 +03:30 [INF] Executed action Web.Controllers.AccountController.ValidateUser (Web) in 5595.1589ms
2021-01-10 01:18:39.036 +03:30 [INF] Executed endpoint 'Web.Controllers.AccountController.ValidateUser (Web)'
2021-01-10 01:18:39.076 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/TokenRequest application/json 42 - 200 - application/json;+charset=utf-8 6000.7247ms
2021-01-10 01:19:01.641 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 38
2021-01-10 01:19:01.653 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 01:19:01.663 +03:30 [INF] Executing endpoint 'Web.Controllers.AccountController.GetToken (Web)'
2021-01-10 01:19:01.684 +03:30 [INF] Route matched with {action = "GetToken", controller = "Account", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetToken(Web.Model.AccountModels.GetTokenViewModel) on controller Web.Controllers.AccountController (Web).
2021-01-10 01:19:01.813 +03:30 [INF] Executing action method Web.Controllers.AccountController.GetToken (Web) - Validation state: "Valid"
2021-01-10 01:19:02.032 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:19:02.210 +03:30 [INF] Executed DbCommand (19ms) [Parameters=[@__request_UserKey_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[GeneratedCode] = @__request_UserKey_0
2021-01-10 01:19:02.322 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[LoginProvider], [u].[Name], [u].[GeneratedTime], [u].[Value]
FROM [UserTokens] AS [u]
WHERE (([u].[UserId] = @__p_0) AND ([u].[LoginProvider] = @__p_1)) AND ([u].[Name] = @__p_2)
2021-01-10 01:19:02.753 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2021-01-10 01:19:02.891 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ClaimType], [u].[ClaimValue], [u].[UserId]
FROM [UserClaims] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2021-01-10 01:19:03.087 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2021-01-10 01:19:03.135 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedDate], [r].[DisplayName], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2021-01-10 01:19:03.250 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[@__role_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ClaimType], [r].[ClaimValue]
FROM [RoleClaims] AS [r]
WHERE [r].[RoleId] = @__role_Id_0
2021-01-10 01:19:04.790 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([Id], [CreatedAt], [IsValid], [UserId])
VALUES (@p0, @p1, @p2, @p3);
2021-01-10 01:19:05.079 +03:30 [INF] Executed action method Web.Controllers.AccountController.GetToken (Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3220.2241ms.
2021-01-10 01:19:05.142 +03:30 [INF] Executing JsonResult, writing value of type 'WebFrameWork.Api.ApiResult`1[[System.Object, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-01-10 01:19:05.196 +03:30 [INF] Executed action Web.Controllers.AccountController.GetToken (Web) in 3491.7598ms
2021-01-10 01:19:05.232 +03:30 [INF] Executed endpoint 'Web.Controllers.AccountController.GetToken (Web)'
2021-01-10 01:19:05.289 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 38 - 200 - application/json;+charset=utf-8 3647.9775ms
2021-01-10 01:19:11.277 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 38
2021-01-10 01:19:11.286 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 01:19:11.297 +03:30 [INF] Executing endpoint 'Web.Controllers.AccountController.GetToken (Web)'
2021-01-10 01:19:11.306 +03:30 [INF] Route matched with {action = "GetToken", controller = "Account", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetToken(Web.Model.AccountModels.GetTokenViewModel) on controller Web.Controllers.AccountController (Web).
2021-01-10 01:19:11.422 +03:30 [INF] Executing action method Web.Controllers.AccountController.GetToken (Web) - Validation state: "Valid"
2021-01-10 01:19:11.443 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:19:11.490 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserKey_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[GeneratedCode] = @__request_UserKey_0
2021-01-10 01:19:11.688 +03:30 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[LoginProvider], [u].[Name], [u].[GeneratedTime], [u].[Value]
FROM [UserTokens] AS [u]
WHERE (([u].[UserId] = @__p_0) AND ([u].[LoginProvider] = @__p_1)) AND ([u].[Name] = @__p_2)
2021-01-10 01:19:11.727 +03:30 [WRN] VerifyTwoFactorTokenAsync() failed for user.
2021-01-10 01:19:11.739 +03:30 [INF] Executed action method Web.Controllers.AccountController.GetToken (Web), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 299.5797ms.
2021-01-10 01:19:11.767 +03:30 [INF] Executing JsonResult, writing value of type 'WebFrameWork.Api.ApiResult`1[[System.Collections.Generic.IDictionary`2[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-01-10 01:19:11.799 +03:30 [INF] Executed action Web.Controllers.AccountController.GetToken (Web) in 470.1702ms
2021-01-10 01:19:11.813 +03:30 [INF] Executed endpoint 'Web.Controllers.AccountController.GetToken (Web)'
2021-01-10 01:19:11.830 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 38 - 400 - application/json;+charset=utf-8 553.7580ms
2021-01-10 01:19:23.684 +03:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 38
2021-01-10 01:19:23.691 +03:30 [INF] No CORS policy found for the specified request.
2021-01-10 01:19:23.700 +03:30 [INF] Executing endpoint 'Web.Controllers.AccountController.GetToken (Web)'
2021-01-10 01:19:23.711 +03:30 [INF] Route matched with {action = "GetToken", controller = "Account", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetToken(Web.Model.AccountModels.GetTokenViewModel) on controller Web.Controllers.AccountController (Web).
2021-01-10 01:19:23.806 +03:30 [INF] Executing action method Web.Controllers.AccountController.GetToken (Web) - Validation state: "Valid"
2021-01-10 01:19:23.819 +03:30 [INF] Entity Framework Core 5.0.0 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-01-10 01:19:23.856 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserKey_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[GeneratedCode], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[GeneratedCode] = @__request_UserKey_0
2021-01-10 01:19:23.939 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[LoginProvider], [u].[Name], [u].[GeneratedTime], [u].[Value]
FROM [UserTokens] AS [u]
WHERE (([u].[UserId] = @__p_0) AND ([u].[LoginProvider] = @__p_1)) AND ([u].[Name] = @__p_2)
2021-01-10 01:19:24.025 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2021-01-10 01:19:24.074 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ClaimType], [u].[ClaimValue], [u].[UserId]
FROM [UserClaims] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2021-01-10 01:19:24.104 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2021-01-10 01:19:24.129 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[CreatedDate], [r].[DisplayName], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2021-01-10 01:19:24.156 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ClaimType], [r].[ClaimValue]
FROM [RoleClaims] AS [r]
WHERE [r].[RoleId] = @__role_Id_0
2021-01-10 01:19:24.202 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([Id], [CreatedAt], [IsValid], [UserId])
VALUES (@p0, @p1, @p2, @p3);
2021-01-10 01:19:24.254 +03:30 [INF] Executed action method Web.Controllers.AccountController.GetToken (Web), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 438.1026ms.
2021-01-10 01:19:24.282 +03:30 [INF] Executing JsonResult, writing value of type 'WebFrameWork.Api.ApiResult`1[[System.Object, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-01-10 01:19:24.299 +03:30 [INF] Executed action Web.Controllers.AccountController.GetToken (Web) in 568.5602ms
2021-01-10 01:19:24.316 +03:30 [INF] Executed endpoint 'Web.Controllers.AccountController.GetToken (Web)'
2021-01-10 01:19:24.328 +03:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/v1/account/user/GetToken application/json 38 - 200 - application/json;+charset=utf-8 643.9146ms
